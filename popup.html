<style>

	.grid {
		overflow: auto;
	}
	
	.row {
		width: 238px;
		font-size: 8pt;
		clear: both;
		overflow: auto;
		margin-bottom: 8px;
	}
	
	.entry {
		-webkit-border-radius: 4px;
		border: 1px solid #8DA0BA;
	}
	
	.entry:hover, .parcol.selected {
		background-color: #B4CCED;
		cursor: pointer;
	}
	
	.date {
		width: 56px;
		float: left;
		margin-right: 2px;
	}
	
	.date, .email, .parcol {
		height: 20px;
		text-align: center;
	}
	
	.last {
		margin-right: 0px;
	}
	
	.email {
		width: 236px;
	}
	
	.paragraph {
		overflow: auto;
	}
	
	.parrow {
		clear: both;
		margin-bottom: 2px;
		overflow: auto;
	}
	
	.parrow.last {
		margin-bottom: 0px;
	}
	
	.parcol {
		width: 44px;	
		margin-right: 2px;
		float: left;
		border: 1px solid #8DA0BA;
		cursor: pointer;
	}
	
	.parcol.first {
		-webkit-border-top-left-radius: 4px;
		-webkit-border-bottom-left-radius: 4px;
	}
	
	.parcol.last {
		-webkit-border-top-right-radius: 4px;
		-webkit-border-bottom-right-radius: 4px;
		margin-right: 0px;
	}
	
</style>

<script type="text/javascript">
	function updateSelected(event, element) {
		var coords = getCoor(event, element);
		var w = coords[0];
		var h = coords[1];
		var rows = element.querySelectorAll(".parrow");
		for (var iy = 0; iy < rows.length; iy++) {
			var cols = rows[iy].querySelectorAll(".parcol");
			for (var ix = 0; ix < cols.length; ix++) {
				if (iy < h && ix < w) {
					cols[ix].style.backgroundColor = "#B4CCED";
				} else {
					cols[ix].style.backgroundColor = "";
				}
			}
		}	
	}
	
	function clearSelected(entry) {
		var entries = entry.querySelectorAll(".parcol");
		for (var i = 0; i < entries.length; i++) {
			entries[i].style.backgroundColor = "";
		}
	}
	
	function clickSelected(event, element) {
		var coords = getCoor(event, element);
		insertParagraphs(coords[1], coords[0]);
	}
	
	function getCoor(event, element) {
		var x = event.x - element.offsetLeft;
		var y = event.y - element.offsetTop;
		var h = Math.ceil(y / 24);
		var w = Math.ceil(x / 48);
		return [w, h];
	}
	
	function insertParagraphs(numberOfParagraphs, paragraphLength) {
		
		chrome.tabs.getSelected(null, function(tab) {
			chrome.tabs.sendRequest(tab.id, { text: "Lorem ipsum"}, function(response) {
				alert("responded");
				window.close();
		  });
		});
	}
	
</script>

<div class="grid">
	<div class="row">
		<div class="paragraph" onmousemove="updateSelected(event, this)" onmouseout="clearSelected(this)" onclick="clickSelected(event, this)">
			<div class="parrow">
				<div class="parcol first">
				</div>
				<div class="parcol">
				</div>
				<div class="parcol">
				</div>
				<div class="parcol">
				</div>
				<div class="parcol last">
				</div>
			</div>
			<div class="parrow">
				<div class="parcol first">
				</div>
				<div class="parcol">
				</div>
				<div class="parcol">
				</div>
				<div class="parcol">
				</div>
				<div class="parcol last">
				</div>
			</div>
			<div class="parrow">
				<div class="parcol first">
				</div>
				<div class="parcol">
				</div>
				<div class="parcol">
				</div>
				<div class="parcol">
				</div>
				<div class="parcol last">
				</div>
			</div>
			<div class="parrow">
				<div class="parcol first">
				</div>
				<div class="parcol">
				</div>
				<div class="parcol">
				</div>
				<div class="parcol">
				</div>
				<div class="parcol last">
				</div>
			</div>
			<div class="parrow last">
				<div class="parcol first">
				</div>
				<div class="parcol">
				</div>
				<div class="parcol">
				</div>
				<div class="parcol">
				</div>
				<div class="parcol last">
				</div>
			</div>
			
		</div>

	</div>
	<div class="row">
		<div class="entry date">
			19.11.2010
		</div>
		<div class="entry date">
			20.11.2010
		</div>
		<div class="entry date">
			21.11.2010
		</div>
		<div class="entry date last">
			??.??.????
		</div>
	</div>
	<div class="row">
		<div class="entry email">
			dominik.raymann@gmail.com
		</div>
	</div>
	
</div>

